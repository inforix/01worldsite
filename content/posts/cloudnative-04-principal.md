---
title: "云原生04-思想"
date: 2020-04-25T20:21:36+08:00
draft: false
---

云原生是什么？它的精髓到底是什么？

我认为云原生的精髓就是**敏捷快速**和**保证可用**。

## 敏捷快速

*”天下武功，唯快不破“！*

我认为云原生最重要的精髓就在于**敏捷快速**。为了实现快速，我们把基础架构抽象掉，让用户可以通过代码来部署基础架构。我们知道传统的云计算平台，主要分为IaaS、PaaS和SaaS三层。阿里云、腾讯云和AWS等都是提供了IaaS，用户可以申请一台虚机，在其上安装操作系统，再部署业务系统。这个步骤还是复杂，其实用户只是为了部署业务系统，并不关心操作系统。后来出现了Docker容器化技术，这比较符合预期了。应用系统交付也变得非常方便，基础架构也变得透明。

## 保证可用

我用了一个非常通俗的话语来描述这个事情：*我保证应用服务是可用的，你不用关心我是怎么实现的*。该怎么理解这句话呢？你不用关心我怎么实现的，也就是说，我不保证这个应用程序不崩溃，但是若崩溃了，我会采取措施快速启动，让服务看起来没有中断。

这就比较有意思了。以前我们写程序竭尽全力，有各种try……catch，设想各种问题，但是总会出现未期的问题，程序可能直接崩溃退出，需要重新启动。而云原生架构下，允许程序出现故障。它的目标是保证服务可用，而不是保证程序不出故障。

但这也不是说程序不要严谨了，只是这种架构帮你处理了一些未期的问题而已。

这部分的正规术语是“**弹性故障处理**”以及**SLO**。

*为了实现敏捷快速，云原生必须具备以下能力：*

## 自动化

自动化是实现敏捷快速的必要途径。只有通过标准化的自动化流程，才能使得交付快速、有效。这也就促进了DevOps的改革，同时也对团队架构带来了变革。传统架构下，开发和部署是各自运作的，而在云原生架构下，开发和部署团队需要协作，双方都需要理解对方的技术架构，并共同制订一套自动化构建、生成、部署的流程环境。

## 声明式代码

在云原生下，用户要实现一个操作，不再是通过写一段代码或者写一段脚本，而是通过声明式语法来声明我需要一项什么资源，该资源需要什么样的配置。至于系统怎么实现你的需求，则可以通过Operator去实现，或者自定义Operator去实现。

## 微服务化

系统不能再像单体应用一样庞大复杂，尤其是要避免其启动慢的问题。根据Martin Fowler的思想，云原生架构建议分拆庞大的单体易用，剥离复用部分，以微服务的形式组建应用系统。这其中的好处我就不多说了。这一部分也是与之前帖子推荐的《十二要素》有关。

## 健康指标

为了能够保证服务可用，每一个云原生应用都必须随时提供健康报告。一旦该应用指标不正常，系统可以据此作出重启该应用的决定。

## 性能指标

云原生是基于云计算环境进行计算的架构，其诞生目的就是为了处理高并发的请求，因此必须对其进行性能方面的考核。根据性能指标，系统也可以作出资源扩充与收缩的决定，既可以节约成本，也可以持续提供快速稳定的服务。

**请思考一下，有了健康指标和性能指标，是不是就有了数据大屏，或者监控Dashboard？云原生架构考虑的还是很周到很灵活的。**

